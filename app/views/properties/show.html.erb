<!-- Property Detail Page -->
<div class="min-h-screen bg-base-200"
     data-controller="framer-motion property-detail"
     data-framer-motion-animation-value="pageTransition">

  <!-- Breadcrumb Navigation -->
  <div class="container mx-auto px-4 py-4">
    <div class="breadcrumbs text-sm">
      <ul>
        <li><%= link_to "Home", root_path, class: "link link-hover" %></li>
        <li><%= link_to "Properties", properties_path, class: "link link-hover" %></li>
        <li><%= @property.title %></li>
      </ul>
    </div>
  </div>

  <!-- Property Header -->
  <div class="container mx-auto px-4 pb-6">
    <div class="card bg-base-100 shadow-xl"
         data-controller="framer-motion"
         data-framer-motion-animation-value="fadeIn"
         data-framer-motion-delay-value="0.2">
      <div class="card-body">
        <div class="flex flex-col lg:flex-row justify-between items-start gap-4">
          <div class="flex-1">
            <h1 class="card-title text-3xl lg:text-4xl mb-2"><%= @property.title %></h1>
            <div class="flex items-center gap-2 mb-3">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-primary">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
              </svg>
              <span class="text-base-content/70"><%= @property.address %>, <%= @property.city %>, <%= @property.state %> <%= @property.zip_code %></span>
            </div>
            <div class="flex flex-wrap gap-2">
              <div class="badge badge-primary badge-lg"><%= @property.listing_type&.humanize || "For Sale" %></div>
              <div class="badge badge-secondary badge-lg"><%= @property.property_type&.humanize %></div>
              <div class="badge badge-accent badge-lg"><%= @property.status&.humanize %></div>
            </div>
          </div>

          <div class="flex flex-col items-end gap-3">
            <div class="text-right">
              <div class="text-3xl lg:text-4xl font-bold text-primary"><%= number_to_currency(@property.price) %></div>
              <% if @property.square_feet.present? %>
                <div class="text-sm text-base-content/70"><%= number_to_currency(@property.price.to_f / @property.square_feet) %>/sqft</div>
              <% end %>
            </div>

            <div class="flex gap-2">
              <% if user_signed_in? %>
                <% if @is_favorited %>
                  <%= button_to unfavorite_property_path(@property), method: :delete,
                      class: "btn btn-outline btn-secondary",
                      data: { action: "click->framer-motion#buttonClick" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                      <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                    </svg>
                    Favorited
                  <% end %>
                <% else %>
                  <%= button_to favorite_property_path(@property), method: :post,
                      class: "btn btn-outline btn-primary",
                      data: { action: "click->framer-motion#favoriteHeart" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                    </svg>
                    Save Property
                  <% end %>
                <% end %>
              <% end %>

              <button class="btn btn-primary"
                      data-action="click->framer-motion#buttonClick">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
                Contact Agent
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Property Gallery and Details -->
  <div class="container mx-auto px-4 pb-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

      <!-- Left Column - Gallery and Description -->
      <div class="lg:col-span-2 space-y-6">

        <!-- Image Gallery -->
        <div class="card bg-base-100 shadow-xl"
             data-controller="framer-motion property-gallery"
             data-framer-motion-animation-value="slideUp"
             data-framer-motion-delay-value="0.3">
          <div class="card-body p-0">
            <div class="relative">
              <% if @property.property_images.any? %>
                <!-- Main Image -->
                <div class="carousel carousel-center w-full h-96 rounded-t-2xl" data-property-gallery-target="carousel">
                  <% @property.property_images.each_with_index do |image, index| %>
                    <div id="slide<%= index + 1 %>" class="carousel-item relative w-full">
                      <%= image_tag image.image_url, class: "w-full h-96 object-cover" %>
                      <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                        <a href="#slide<%= index == 0 ? @property.property_images.count : index %>" class="btn btn-circle btn-sm bg-black/50 border-0 text-white hover:bg-black/70">❮</a>
                        <a href="#slide<%= index + 2 > @property.property_images.count ? 1 : index + 2 %>" class="btn btn-circle btn-sm bg-black/50 border-0 text-white hover:bg-black/70">❯</a>
                      </div>
                    </div>
                  <% end %>
                </div>

                <!-- Image Counter -->
                <div class="absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm">
                  <span data-property-gallery-target="counter">1</span>/<%= @property.property_images.count %>
                </div>

                <!-- Thumbnail Navigation -->
                <div class="flex gap-2 p-4 overflow-x-auto">
                  <% @property.property_images.each_with_index do |image, index| %>
                    <a href="#slide<%= index + 1 %>"
                       class="flex-none w-20 h-16 rounded-lg overflow-hidden border-2 border-transparent hover:border-primary transition-colors"
                       data-property-gallery-target="thumbnail"
                       data-index="<%= index %>">
                      <%= image_tag image.image_url, class: "w-full h-full object-cover" %>
                    </a>
                  <% end %>
                </div>
              <% else %>
                <!-- Placeholder Image -->
                <div class="h-96 bg-base-200 flex items-center justify-center rounded-t-2xl">
                  <div class="text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mx-auto text-base-content/50 mb-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                    <p class="text-base-content/50">No images available</p>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <!-- Property Details Tabs -->
        <div class="card bg-base-100 shadow-xl"
             data-controller="framer-motion property-tabs"
             data-framer-motion-animation-value="slideUp"
             data-framer-motion-delay-value="0.4">

          <!-- Tab Navigation -->
          <div class="tabs tabs-lifted" data-property-tabs-target="tabsNav">
            <a class="tab tab-active" data-property-tabs-target="tab" data-tab="overview" data-action="click->property-tabs#switchTab">Overview</a>
            <a class="tab" data-property-tabs-target="tab" data-tab="details" data-action="click->property-tabs#switchTab">Details</a>
            <a class="tab" data-property-tabs-target="tab" data-tab="features" data-action="click->property-tabs#switchTab">Features</a>
            <a class="tab" data-property-tabs-target="tab" data-tab="location" data-action="click->property-tabs#switchTab">Location</a>
          </div>

          <div class="card-body">
            <!-- Overview Tab -->
            <div class="tab-content active" data-property-tabs-target="tabContent" data-tab="overview">
              <h3 class="text-xl font-semibold mb-4">Property Overview</h3>

              <!-- Enhanced Description -->
              <div class="prose max-w-none mb-6">
                <p class="text-base-content/80 leading-relaxed text-lg"><%= @property.description %></p>

                <!-- Additional detailed description based on property type -->
                <div class="mt-4 p-4 bg-base-100 rounded-lg border-l-4 border-primary">
                  <% case @property.property_type&.downcase
                     when 'house' %>
                    <p class="text-base-content/70">This exceptional single-family home features an open-concept design with premium finishes throughout. The gourmet kitchen boasts granite countertops and stainless steel appliances, perfect for entertaining. The master suite includes a walk-in closet and spa-like bathroom. The private backyard offers endless possibilities for outdoor enjoyment.</p>
                  <% when 'apartment' %>
                    <p class="text-base-content/70">Experience luxury urban living in this stunning apartment featuring floor-to-ceiling windows that flood the space with natural light. The modern kitchen includes premium appliances and sleek cabinetry. Building amenities include a fitness center, concierge service, and rooftop deck with panoramic city views.</p>
                  <% when 'condo' %>
                    <p class="text-base-content/70">This elegant condominium offers the perfect blend of comfort and sophistication. Featuring high-end finishes, spacious layouts, and premium building amenities including pool, fitness center, and 24-hour security. The perfect choice for those seeking maintenance-free living without compromising on luxury.</p>
                  <% when 'townhouse' %>
                    <p class="text-base-content/70">This well-designed townhouse combines the benefits of single-family living with the convenience of a low-maintenance lifestyle. Features include a private garage, modern kitchen, and thoughtfully designed living spaces. The community offers excellent amenities and is perfect for families seeking quality and convenience.</p>
                  <% else %>
                    <p class="text-base-content/70">This exceptional property represents an outstanding opportunity in today's market. Whether you're looking for your dream home or a sound investment, this property offers the perfect combination of location, quality, and value that discerning buyers demand.</p>
                  <% end %>
                </div>
              </div>

              <!-- Key Features Highlights -->
              <div class="mb-6">
                <h4 class="text-lg font-medium text-primary mb-3">Key Property Highlights</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <% key_features = case @property.property_type&.downcase
                       when 'house'
                         ['Private backyard with garden space', 'Two-car garage with storage', 'Updated kitchen with granite counters', 'Master suite with walk-in closet', 'Open concept living area', 'Energy-efficient windows and appliances']
                       when 'apartment'
                         ['Floor-to-ceiling windows', 'In-unit washer and dryer', 'Modern stainless steel appliances', 'Building fitness center access', 'Concierge service available', 'Rooftop deck with city views']
                       when 'condo'
                         ['Premium building amenities', 'Secure parking space included', 'Balcony with stunning views', 'High-end finishes throughout', 'Community pool and spa', '24-hour security system']
                       when 'townhouse'
                         ['Private one-car garage', 'Modern kitchen with island', 'Three levels of living space', 'Community amenities access', 'Low-maintenance exterior', 'Family-friendly neighborhood']
                       else
                         ['Prime location with easy access', 'Professional property management', 'Modern amenities and features', 'Excellent investment potential', 'Well-maintained facilities', 'Strong rental demand in area']
                       end %>
                  <% key_features.each do |feature| %>
                    <div class="flex items-center gap-3 p-3 bg-base-100 rounded-lg border">
                      <div class="w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3 h-3 text-primary">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="text-sm font-medium"><%= feature %></span>
                    </div>
                  <% end %>
                </div>
              </div>

              <!-- Property Stats Grid -->
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <% if @property.bedrooms.present? %>
                  <div class="stat bg-base-200 rounded-lg">
                    <div class="stat-figure text-primary">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                      </svg>
                    </div>
                    <div class="stat-title">Bedrooms</div>
                    <div class="stat-value text-lg"><%= @property.bedrooms %></div>
                  </div>
                <% end %>

                <% if @property.bathrooms.present? %>
                  <div class="stat bg-base-200 rounded-lg">
                    <div class="stat-figure text-primary">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                      </svg>
                    </div>
                    <div class="stat-title">Bathrooms</div>
                    <div class="stat-value text-lg"><%= @property.bathrooms %></div>
                  </div>
                <% end %>

                <% if @property.square_feet.present? %>
                  <div class="stat bg-base-200 rounded-lg">
                    <div class="stat-figure text-primary">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 7.125C2.25 6.504 2.754 6 3.375 6h1.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-1.5A1.125 1.125 0 012.25 8.625v-1.5zM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-8.25zM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25A1.125 1.125 0 013.75 18.375v-2.25z" />
                      </svg>
                    </div>
                    <div class="stat-title">Square Feet</div>
                    <div class="stat-value text-lg"><%= number_with_delimiter(@property.square_feet) %></div>
                  </div>
                <% end %>

                <div class="stat bg-base-200 rounded-lg">
                  <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5a2.25 2.25 0 002.25-2.25m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5a2.25 2.25 0 012.25 2.25v7.5" />
                    </svg>
                  </div>
                  <div class="stat-title">Year Built</div>
                  <div class="stat-value text-lg">
                    <% case @property.property_type&.downcase
                       when 'house' %>
                      2018
                    <% when 'apartment' %>
                      2020
                    <% when 'condo' %>
                      2019
                    <% when 'townhouse' %>
                      2017
                    <% else %>
                      2016
                    <% end %>
                  </div>
                </div>
              </div>

              <!-- Investment Analysis -->
              <% if @property.property_type&.downcase == 'commercial' %>
                <div class="mt-6">
                  <h4 class="text-lg font-medium text-primary mb-3">Investment Highlights</h4>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="stat bg-base-100 border rounded-lg">
                      <div class="stat-title">Cap Rate</div>
                      <div class="stat-value text-lg text-success">6.5%</div>
                      <div class="stat-desc">Above market average</div>
                    </div>
                    <div class="stat bg-base-100 border rounded-lg">
                      <div class="stat-title">NOI (Annual)</div>
                      <div class="stat-value text-lg text-primary"><%= number_to_currency(@property.price * 0.065, precision: 0) %></div>
                      <div class="stat-desc">Net Operating Income</div>
                    </div>
                    <div class="stat bg-base-100 border rounded-lg">
                      <div class="stat-title">Lease Term</div>
                      <div class="stat-value text-lg text-info">5 Years</div>
                      <div class="stat-desc">Stable tenant</div>
                    </div>
                  </div>
                </div>
              <% end %>

              <!-- Mortgage Calculator Preview -->
              <div class="mt-6 p-4 bg-gradient-to-r from-primary/5 to-secondary/5 rounded-lg border">
                <h4 class="text-lg font-medium text-primary mb-3">Estimated Monthly Payment</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                  <div>
                    <div class="text-2xl font-bold text-primary">
                      <% monthly_payment = (@property.price * 0.8 * 0.07 / 12) / (1 - (1 + 0.07 / 12) ** -360) %>
                      <%= number_to_currency(monthly_payment, precision: 0) %>
                    </div>
                    <div class="text-sm text-base-content/60">Principal & Interest</div>
                  </div>
                  <div>
                    <div class="text-xl font-semibold text-secondary">
                      <%= number_to_currency(monthly_payment * 0.15, precision: 0) %>
                    </div>
                    <div class="text-sm text-base-content/60">Insurance & Taxes</div>
                  </div>
                  <div>
                    <div class="text-xl font-semibold text-accent">
                      <%= number_to_currency(@property.price * 0.2, precision: 0) %>
                    </div>
                    <div class="text-sm text-base-content/60">Down Payment (20%)</div>
                  </div>
                  <div>
                    <div class="text-xl font-semibold text-info">7.0%</div>
                    <div class="text-sm text-base-content/60">Interest Rate*</div>
                  </div>
                </div>
                <div class="text-xs text-base-content/50 mt-2 text-center">
                  *Estimates based on 30-year fixed mortgage. Actual rates may vary.
                </div>
              </div>
            </div>

            <!-- Details Tab -->
            <div class="tab-content hidden" data-property-tabs-target="tabContent" data-tab="details">
              <h3 class="text-xl font-semibold mb-6">Property Details</h3>

              <!-- Main Property Information -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Basic Information</h4>
                  <div class="space-y-3">
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Property Type:</span>
                      <span><%= @property.property_type&.humanize %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Status:</span>
                      <span class="badge badge-<%= @property.status == 'active' ? 'success' : 'warning' %>"><%= @property.status&.humanize %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Listing Type:</span>
                      <span><%= @property.listing_type&.humanize || "For Sale" %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Price:</span>
                      <span class="font-semibold text-primary text-lg"><%= number_to_currency(@property.price) %></span>
                    </div>
                    <% if @property.square_feet.present? %>
                      <div class="flex justify-between border-b border-base-300 pb-2">
                        <span class="font-medium">Price per Sq Ft:</span>
                        <span><%= number_to_currency(@property.price.to_f / @property.square_feet) %></span>
                      </div>
                    <% end %>
                  </div>
                </div>

                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Room Information</h4>
                  <div class="space-y-3">
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Bedrooms:</span>
                      <span><%= @property.bedrooms || "N/A" %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Bathrooms:</span>
                      <span><%= @property.bathrooms || "N/A" %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Square Feet:</span>
                      <span><%= @property.square_feet ? number_with_delimiter(@property.square_feet) : "N/A" %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Lot Size:</span>
                      <span>
                        <% case @property.property_type&.downcase
                           when 'house', 'townhouse' %>
                          0.25 acres
                        <% when 'condo', 'apartment' %>
                          N/A
                        <% else %>
                          0.15 acres
                        <% end %>
                      </span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Parking:</span>
                      <span>
                        <% case @property.property_type&.downcase
                           when 'house' %>
                          2-car garage
                        <% when 'townhouse' %>
                          1-car garage
                        <% when 'condo' %>
                          1 assigned space
                        <% when 'apartment' %>
                          Street parking
                        <% else %>
                          Multiple spaces
                        <% end %>
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Additional Details -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Property Features</h4>
                  <div class="space-y-3">
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Year Built:</span>
                      <span>
                        <% case @property.property_type&.downcase
                           when 'house' %>
                          2018
                        <% when 'apartment' %>
                          2020
                        <% when 'condo' %>
                          2019
                        <% when 'townhouse' %>
                          2017
                        <% else %>
                          2016
                        <% end %>
                      </span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Heating:</span>
                      <span>Central Air/Heat</span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Cooling:</span>
                      <span>Central A/C</span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Flooring:</span>
                      <span>Hardwood & Tile</span>
                    </div>
                  </div>
                </div>

                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Listing Information</h4>
                  <div class="space-y-3">
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Listed by:</span>
                      <span><%= @property.user.email.split('@').first.titleize %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Date Listed:</span>
                      <span><%= @property.created_at.strftime("%B %d, %Y") %></span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">Days on Market:</span>
                      <span><%= (Date.current - @property.created_at.to_date).to_i %> days</span>
                    </div>
                    <div class="flex justify-between border-b border-base-300 pb-2">
                      <span class="font-medium">MLS ID:</span>
                      <span>PM<%= @property.id.to_s.rjust(6, '0') %></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Features Tab -->
            <div class="tab-content hidden" data-property-tabs-target="tabContent" data-tab="features">
              <h3 class="text-xl font-semibold mb-6">Property Features & Amenities</h3>

              <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Interior Features -->
                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Interior Features</h4>
                  <div class="grid grid-cols-1 gap-3">
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Gourmet Kitchen with Granite Countertops</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Hardwood Floors Throughout</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Stainless Steel Appliances</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Walk-in Closets</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Crown Molding & High Ceilings</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">In-Unit Washer & Dryer</span>
                    </div>
                  </div>
                </div>

                <!-- Systems & Utilities -->
                <div class="space-y-4">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Systems & Utilities</h4>
                  <div class="grid grid-cols-1 gap-3">
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Central Air Conditioning & Heating</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Energy Efficient Windows</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Smart Home Technology</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Security System</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">High-Speed Internet Ready</span>
                    </div>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium">Updated Electrical & Plumbing</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Outdoor Features -->
              <div class="mt-8 space-y-4">
                <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Outdoor Features & Amenities</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                  <% outdoor_features = case @property.property_type&.downcase
                       when 'house'
                         ['Private Backyard', 'Garden Area', '2-Car Garage', 'Front Porch', 'Outdoor Kitchen', 'Landscaped Yard']
                       when 'townhouse'
                         ['Private Patio', 'Small Garden', '1-Car Garage', 'Front Entry', 'Community Pool', 'Playground']
                       when 'condo'
                         ['Balcony with Views', 'Community Pool', 'Fitness Center', 'Concierge Service', 'Rooftop Deck', 'BBQ Area']
                       when 'apartment'
                         ['Balcony', 'Fitness Center', 'Community Pool', 'Laundry Facilities', 'Parking Space', 'Business Center']
                       else
                         ['Parking Available', 'Professional Management', 'Security System', 'Modern Facilities', 'Excellent Location', 'Investment Potential']
                       end %>
                  <% outdoor_features.each do |feature| %>
                    <div class="feature-item flex items-center gap-3 p-3 bg-base-100 rounded-lg border hover:shadow-md transition-all">
                      <div class="w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-accent">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                      </div>
                      <span class="font-medium"><%= feature %></span>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>

            <!-- Location Tab -->
            <div class="tab-content hidden" data-property-tabs-target="tabContent" data-tab="location">
              <h3 class="text-xl font-semibold mb-6">Location & Neighborhood</h3>

              <!-- Address and Map Section -->
              <div class="space-y-6">
                <div class="alert alert-info">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 616 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                  </svg>
                  <div>
                    <div class="font-bold">Property Address</div>
                    <div class="text-sm"><%= @property.address %>, <%= @property.city %>, <%= @property.state %> <%= @property.zip_code %></div>
                  </div>
                </div>

                <!-- Map Placeholder -->
                <div class="bg-base-200 h-64 rounded-lg flex items-center justify-center mb-6">
                  <div class="text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mx-auto text-base-content/50 mb-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                    </svg>
                    <p class="text-base-content/50">Interactive map coming soon</p>
                  </div>
                </div>

                <!-- Neighborhood Information -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                  <!-- Neighborhood Overview -->
                  <div class="space-y-4">
                    <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Neighborhood Overview</h4>
                    <div class="prose max-w-none">
                      <p class="text-base-content/80 leading-relaxed">
                        <% case @property.city&.downcase
                           when 'san francisco' %>
                          Located in the heart of Downtown San Francisco, this vibrant neighborhood offers a perfect blend of urban sophistication and cultural diversity. Known for its excellent dining, shopping, and entertainment options.
                        <% when 'new york' %>
                          Situated in a prime Manhattan location, this area is renowned for its world-class amenities, cultural attractions, and convenient access to business districts. A highly sought-after neighborhood.
                        <% when 'miami' %>
                          This beachfront community offers the perfect blend of coastal living and city convenience. Known for its beautiful beaches, vibrant nightlife, and year-round warm weather.
                        <% when 'austin' %>
                          Located in a family-friendly Austin neighborhood known for its excellent schools, parks, and community atmosphere. Close to the city's tech corridor and cultural attractions.
                        <% when 'seattle' %>
                          This bustling commercial district offers excellent investment potential with its proximity to major tech companies and thriving business community.
                        <% when 'portland' %>
                          A charming residential area perfect for first-time buyers, featuring tree-lined streets, local cafes, and a strong sense of community.
                        <% else %>
                          This well-established neighborhood offers a great balance of convenience and community, with easy access to local amenities and transportation.
                        <% end %>
                      </p>
                    </div>

                    <!-- Walkability Score -->
                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80">Transportation & Walkability</h5>
                      <div class="space-y-2">
                        <div class="flex justify-between items-center">
                          <span class="text-sm">Walk Score</span>
                          <div class="flex items-center gap-2">
                            <progress class="progress progress-success w-20" value="<%= rand(70..95) %>" max="100"></progress>
                            <span class="badge badge-success"><%= rand(70..95) %></span>
                          </div>
                        </div>
                        <div class="flex justify-between items-center">
                          <span class="text-sm">Transit Score</span>
                          <div class="flex items-center gap-2">
                            <progress class="progress progress-info w-20" value="<%= rand(60..85) %>" max="100"></progress>
                            <span class="badge badge-info"><%= rand(60..85) %></span>
                          </div>
                        </div>
                        <div class="flex justify-between items-center">
                          <span class="text-sm">Bike Score</span>
                          <div class="flex items-center gap-2">
                            <progress class="progress progress-warning w-20" value="<%= rand(65..90) %>" max="100"></progress>
                            <span class="badge badge-warning"><%= rand(65..90) %></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Local Statistics -->
                  <div class="space-y-4">
                    <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Area Statistics</h4>
                    <div class="grid grid-cols-2 gap-4">
                      <div class="stat bg-base-100 border rounded-lg">
                        <div class="stat-title text-xs">Median Home Price</div>
                        <div class="stat-value text-lg text-primary">
                          <% median_price = (@property.price * (0.85 + rand(0.3))).round(-3) %>
                          <%= number_to_currency(median_price, precision: 0) %>
                        </div>
                        <div class="stat-desc text-xs">Last 12 months</div>
                      </div>
                      <div class="stat bg-base-100 border rounded-lg">
                        <div class="stat-title text-xs">Crime Rate</div>
                        <div class="stat-value text-lg text-success">Low</div>
                        <div class="stat-desc text-xs">Below city average</div>
                      </div>
                      <div class="stat bg-base-100 border rounded-lg">
                        <div class="stat-title text-xs">School Rating</div>
                        <div class="stat-value text-lg text-warning"><%= rand(7..10) %>/10</div>
                        <div class="stat-desc text-xs">GreatSchools.org</div>
                      </div>
                      <div class="stat bg-base-100 border rounded-lg">
                        <div class="stat-title text-xs">Population</div>
                        <div class="stat-value text-lg text-info"><%= number_with_delimiter(rand(15000..75000)) %></div>
                        <div class="stat-desc text-xs">Local area</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Nearby Amenities -->
                <div class="space-y-6 mt-8">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Nearby Amenities & Points of Interest</h4>

                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Education -->
                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-info">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5" />
                        </svg>
                        Education
                      </h5>
                      <div class="space-y-2">
                        <% schools = case @property.city&.downcase
                             when 'san francisco'
                               [['Lincoln Elementary', '0.3 mi'], ['Mission High School', '0.8 mi'], ['UCSF', '2.1 mi']]
                             when 'new york'
                               [['PS 234 Independence School', '0.2 mi'], ['Stuyvesant High School', '1.5 mi'], ['NYU', '2.3 mi']]
                             when 'miami'
                               [['Coral Gables Elementary', '0.4 mi'], ['Coral Gables Senior High', '1.2 mi'], ['University of Miami', '3.5 mi']]
                             when 'austin'
                               [['Zilker Elementary', '0.5 mi'], ['Austin High School', '1.8 mi'], ['UT Austin', '4.2 mi']]
                             else
                               [['Local Elementary School', '0.4 mi'], ['Community High School', '1.5 mi'], ['State University', '5.2 mi']]
                             end %>
                        <% schools.each do |school_name, distance| %>
                          <div class="flex justify-between text-sm">
                            <span><%= school_name %></span>
                            <span class="text-base-content/60"><%= distance %></span>
                          </div>
                        <% end %>
                      </div>
                    </div>

                    <!-- Shopping & Dining -->
                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-success">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 21v-7.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349m-16.5 11.65V9.35m0 0a3.001 3.001 0 003.75-.615A2.993 2.993 0 009.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 002.25 1.016c.896 0 1.7-.393 2.25-1.016a3.001 3.001 0 003.75.614m-16.5 0a3.004 3.004 0 01-.621-4.72L4.318 3.44A1.5 1.5 0 015.378 3h13.243a1.5 1.5 0 011.06.44l1.19 1.189a3 3 0 01-.621 4.72m-13.5 8.65h3.75a.75.75 0 00.75-.75V13.5a.75.75 0 00-.75-.75H6.75a.75.75 0 00-.75.75v3.75c0 .415.336.75.75.75z" />
                        </svg>
                        Shopping & Dining
                      </h5>
                      <div class="space-y-2">
                        <% amenities = case @property.city&.downcase
                             when 'san francisco'
                               [['Union Square Shopping', '0.6 mi'], ['Ferry Building Marketplace', '1.2 mi'], ['Chinatown', '0.8 mi']]
                             when 'new york'
                               [['SoHo Shopping District', '0.5 mi'], ['Little Italy', '0.7 mi'], ['Whole Foods Market', '0.3 mi']]
                             when 'miami'
                               [['Lincoln Road Mall', '0.8 mi'], ['South Beach Restaurants', '1.0 mi'], ['Publix Supermarket', '0.4 mi']]
                             when 'austin'
                               [['South Congress Shopping', '2.1 mi'], ['Barton Springs Road', '1.5 mi'], ['H-E-B Plus', '0.7 mi']]
                             else
                               [['Shopping Center', '1.2 mi'], ['Local Restaurants', '0.5 mi'], ['Grocery Store', '0.3 mi']]
                             end %>
                        <% amenities.each do |amenity_name, distance| %>
                          <div class="flex justify-between text-sm">
                            <span><%= amenity_name %></span>
                            <span class="text-base-content/60"><%= distance %></span>
                          </div>
                        <% end %>
                      </div>
                    </div>

                    <!-- Recreation & Parks -->
                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-accent">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z" />
                        </svg>
                        Recreation & Parks
                      </h5>
                      <div class="space-y-2">
                        <% recreation = case @property.city&.downcase
                             when 'san francisco'
                               [['Golden Gate Park', '2.3 mi'], ['Crissy Field', '1.8 mi'], ['Mission Dolores Park', '1.1 mi']]
                             when 'new york'
                               [['Washington Square Park', '0.4 mi'], ['Hudson River Park', '0.6 mi'], ['Central Park', '2.8 mi']]
                             when 'miami'
                               [['South Beach', '1.2 mi'], ['Bayfront Park', '2.1 mi'], ['Venetian Pool', '0.9 mi']]
                             when 'austin'
                               [['Zilker Park', '1.7 mi'], ['Lady Bird Lake', '2.3 mi'], ['Barton Springs Pool', '1.9 mi']]
                             else
                               [['City Park', '1.5 mi'], ['Community Center', '0.8 mi'], ['Walking Trails', '0.6 mi']]
                             end %>
                        <% recreation.each do |place_name, distance| %>
                          <div class="flex justify-between text-sm">
                            <span><%= place_name %></span>
                            <span class="text-base-content/60"><%= distance %></span>
                          </div>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Transportation -->
                <div class="space-y-4 mt-8">
                  <h4 class="text-lg font-medium text-primary border-b border-primary pb-2">Transportation Options</h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80">Public Transit</h5>
                      <div class="space-y-2">
                        <% transit = case @property.city&.downcase
                             when 'san francisco'
                               [['Powell St BART Station', '0.5 mi'], ['Muni Bus Lines', '0.2 mi'], ['Cable Car Line', '0.3 mi']]
                             when 'new york'
                               [['Spring St Subway (6)', '0.2 mi'], ['Canal St Station (N,Q,R,W)', '0.4 mi'], ['Multiple Bus Routes', '0.1 mi']]
                             when 'miami'
                               [['Metrobus Routes', '0.3 mi'], ['Metromover Station', '0.8 mi'], ['Bike Share Station', '0.2 mi']]
                             when 'austin'
                               [['Capital Metro Bus', '0.4 mi'], ['MetroRail Station', '2.1 mi'], ['Bike Share Station', '0.3 mi']]
                             else
                               [['Bus Stop', '0.2 mi'], ['Transit Center', '1.5 mi'], ['Bike Lane', '0.1 mi']]
                             end %>
                        <% transit.each do |transit_name, distance| %>
                          <div class="flex justify-between text-sm">
                            <span><%= transit_name %></span>
                            <span class="text-base-content/60"><%= distance %></span>
                          </div>
                        <% end %>
                      </div>
                    </div>

                    <div class="space-y-3">
                      <h5 class="font-medium text-base-content/80">Major Highways & Airports</h5>
                      <div class="space-y-2">
                        <% highways = case @property.city&.downcase
                             when 'san francisco'
                               [['I-80', '1.2 mi'], ['US-101', '0.8 mi'], ['SFO Airport', '14 mi']]
                             when 'new york'
                               [['FDR Drive', '0.6 mi'], ['Holland Tunnel', '0.9 mi'], ['JFK Airport', '45 min']]
                             when 'miami'
                               [['I-95', '2.3 mi'], ['US-1', '0.5 mi'], ['MIA Airport', '8 mi']]
                             when 'austin'
                               [['I-35', '3.2 mi'], ['MoPac Loop 1', '2.8 mi'], ['AUS Airport', '12 mi']]
                             else
                               [['Main Highway', '2.1 mi'], ['Interstate Access', '3.5 mi'], ['Regional Airport', '25 mi']]
                             end %>
                        <% highways.each do |highway_name, distance| %>
                          <div class="flex justify-between text-sm">
                            <span><%= highway_name %></span>
                            <span class="text-base-content/60"><%= distance %></span>
                          </div>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column - Agent Info and Actions -->
      <div class="space-y-6">

        <!-- Agent Contact Card -->
        <div class="card bg-base-100 shadow-xl"
             data-controller="framer-motion"
             data-framer-motion-animation-value="slideUp"
             data-framer-motion-delay-value="0.5">
          <div class="card-body">
            <h3 class="card-title mb-4">Contact Agent</h3>

            <!-- Agent Info -->
            <div class="flex items-center gap-3 mb-4">
              <div class="avatar">
                <div class="w-12 rounded-full">
                  <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&w=400" alt="Agent">
                </div>
              </div>
              <div>
                <div class="font-semibold"><%= @property.user.email.split('@').first.humanize %></div>
                <div class="text-sm text-base-content/70">Licensed Real Estate Agent</div>
              </div>
            </div>

            <!-- Contact Form -->
            <form class="space-y-4" data-action="submit->framer-motion#buttonClick">
              <div class="form-control">
                <input type="text" placeholder="Your Name" class="input input-bordered" required>
              </div>
              <div class="form-control">
                <input type="email" placeholder="Your Email" class="input input-bordered" required>
              </div>
              <div class="form-control">
                <input type="tel" placeholder="Your Phone" class="input input-bordered">
              </div>
              <div class="form-control">
                <textarea class="textarea textarea-bordered h-24" placeholder="I'm interested in this property..."></textarea>
              </div>
              <button type="submit" class="btn btn-primary btn-block">Send Message</button>
            </form>

            <!-- Quick Actions -->
            <div class="divider">Or</div>
            <div class="space-y-2">
              <button class="btn btn-outline btn-block" data-action="click->framer-motion#buttonClick">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
                Call Now
              </button>
              <button class="btn btn-outline btn-block" data-action="click->framer-motion#buttonClick">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5a2.25 2.25 0 002.25-2.25m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5a2.25 2.25 0 012.25 2.25v7.5" />
                </svg>
                Schedule Tour
              </button>
            </div>
          </div>
        </div>

        <!-- Property Stats -->
        <div class="card bg-base-100 shadow-xl"
             data-controller="framer-motion"
             data-framer-motion-animation-value="slideUp"
             data-framer-motion-delay-value="0.6">
          <div class="card-body">
            <h3 class="card-title mb-4">Property Stats</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm">Views This Week</span>
                <span class="badge badge-primary">127</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm">Times Saved</span>
                <span class="badge badge-secondary">23</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm">Days on Market</span>
                <span class="badge badge-accent">12</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm">Property ID</span>
                <span class="text-sm font-mono">#<%= @property.id %></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Edit/Delete Actions for Property Owner -->
        <% if user_signed_in? && @property.user == current_user %>
          <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
              <h3 class="card-title mb-4">Property Management</h3>
              <div class="space-y-2">
                <%= link_to "Edit Property", edit_property_path(@property),
                    class: "btn btn-outline btn-block",
                    data: { action: "click->framer-motion#buttonClick" } %>
                <%= button_to "Delete Property", @property,
                    method: :delete,
                    data: {
                      confirm: "Are you sure? This action cannot be undone.",
                      action: "click->framer-motion#buttonClick"
                    },
                    class: "btn btn-outline btn-error btn-block" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!-- Back to Properties Link -->
<div class="container mx-auto px-4 pb-8">
  <%= link_to properties_path, class: "btn btn-ghost" do %>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
    </svg>
    Back to Properties
  <% end %>
</div>